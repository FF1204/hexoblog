<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/hexoblog/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/hexoblog/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/hexoblog/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/hexoblog/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/hexoblog/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/hexoblog/hexoblog/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/hexoblog/hexoblog/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/hexoblog/hexoblog/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/hexoblog/hexoblog/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="fMRI,toolboxhexo,">





  <link rel="alternate" href="/hexoblog/atom.xml" title="FEIFEI" type="application/atom+xml">






<meta name="description" content="fMRI分析的各个阶段用到的工具包和画图工具。">
<meta name="keywords" content="fMRI,toolboxhexo">
<meta property="og:type" content="article">
<meta property="og:title" content="fMRI中常用的工具包">
<meta property="og:url" content="http://FF1204.github.io/hexoblog/技术/认知神经科学/fMRI中常用的工具包/index.html">
<meta property="og:site_name" content="FEIFEI">
<meta property="og:description" content="fMRI分析的各个阶段用到的工具包和画图工具。">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://ff1204.github.io/hexoblog/技术/认知神经科学/fMRI中常用的工具包/2017-05-02_120405.png">
<meta property="og:image" content="http://ff1204.github.io/hexoblog/技术/认知神经科学/fMRI中常用的工具包/2017-05-02_111209.png">
<meta property="og:image" content="http://ff1204.github.io/hexoblog/技术/认知神经科学/fMRI中常用的工具包/2017-05-02_125514.png">
<meta property="og:image" content="http://ff1204.github.io/hexoblog/技术/认知神经科学/fMRI中常用的工具包/2017-05-02_130248.png">
<meta property="og:image" content="http://ff1204.github.io/hexoblog/技术/认知神经科学/fMRI中常用的工具包/2017-05-02_130835.png">
<meta property="og:image" content="http://ff1204.github.io/hexoblog/技术/认知神经科学/fMRI中常用的工具包/1.png">
<meta property="og:image" content="http://ff1204.github.io/hexoblog/技术/认知神经科学/fMRI中常用的工具包/2.png">
<meta property="og:image" content="http://ff1204.github.io/hexoblog/技术/认知神经科学/fMRI中常用的工具包/QQ截图20170502132207.png">
<meta property="og:image" content="http://ff1204.github.io/hexoblog/技术/认知神经科学/fMRI中常用的工具包/5.png">
<meta property="og:image" content="http://ff1204.github.io/hexoblog/技术/认知神经科学/fMRI中常用的工具包/lh_aparc.jpeg">
<meta property="og:image" content="http://ff1204.github.io/hexoblog/技术/认知神经科学/fMRI中常用的工具包/encode.png">
<meta property="og:image" content="http://ff1204.github.io/hexoblog/技术/认知神经科学/fMRI中常用的工具包/8.png">
<meta property="og:image" content="http://ff1204.github.io/hexoblog/技术/认知神经科学/fMRI中常用的工具包/caret.png">
<meta property="og:image" content="http://ff1204.github.io/hexoblog/技术/认知神经科学/fMRI中常用的工具包/QQ截图20170502133729.png">
<meta property="og:image" content="http://ff1204.github.io/hexoblog/技术/认知神经科学/fMRI中常用的工具包/QQ截图20170514155026.png">
<meta property="og:updated_time" content="2019-08-01T02:24:50.918Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="fMRI中常用的工具包">
<meta name="twitter:description" content="fMRI分析的各个阶段用到的工具包和画图工具。">
<meta name="twitter:image" content="http://ff1204.github.io/hexoblog/技术/认知神经科学/fMRI中常用的工具包/2017-05-02_120405.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/hexoblog/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://FF1204.github.io/hexoblog/技术/认知神经科学/fMRI中常用的工具包/">





  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "c0ad732b"
    });
  daovoice('update');
  </script>


  <title>fMRI中常用的工具包 | FEIFEI</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/hexoblog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">FEIFEI</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/hexoblog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/hexoblog/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/hexoblog/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://FF1204.github.io/hexoblog/hexoblog/技术/认知神经科学/fMRI中常用的工具包/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="FEI FEI">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/hexoblog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="FEIFEI">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">fMRI中常用的工具包</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-02T10:47:38+08:00">
                2017-05-02
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/hexoblog/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/hexoblog/categories/技术/认知神经科学/" itemprop="url" rel="index">
                    <span itemprop="name">认知神经科学</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2.1k
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  9
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>fMRI分析的各个阶段用到的工具包和画图工具。<br><a id="more"></a></p>
<h2 id="实验设计"><a href="#实验设计" class="headerlink" title="实验设计"></a>实验设计</h2><h3 id="psychopy"><a href="#psychopy" class="headerlink" title="psychopy"></a><a href="http://www.psychopy.org/" target="_blank" rel="noopener">psychopy</a></h3><p>PsychoPy is an open-source application allowing you run a wide range of neuroscience, psychology and psychophysics experiments. It’s a free, powerful alternative to Presentation™ or e-Prime™, written in Python (a free alternative to Matlab™ ).</p>
<p>PsychoPy is unique in giving you a choice of interface: use the Builder interface to build rich, flexible experiments easily or use the Coder interface to write extremely powerful experiments in the widely-used Python programming language. The best of both worlds!</p>
<p>一个用于刺激呈现的工具包，可以保住设计实验，处理图像和声音的呈现方式，有基于matlab的版本。</p>
<h2 id="数据预处理和统计分析"><a href="#数据预处理和统计分析" class="headerlink" title="数据预处理和统计分析"></a>数据预处理和统计分析</h2><h3 id="SPM"><a href="#SPM" class="headerlink" title="SPM"></a><a href="http://www.fil.ion.ucl.ac.uk/spm/" target="_blank" rel="noopener">SPM</a></h3><p><img src="2017-05-02_120405.png" alt="SPM"></p>
<p>基于matlab的工具包，可以完成fMRI原始数据格式的转换，时间层校正，头动校正，配准，分割，平滑等预处理操作。可以进行个体水平和组水平的统计分析。可以做DCM。除此之外，还能提供一些图像之间运算的小工具，例如图像之间的加减乘除。</p>
<h3 id="AFNI"><a href="#AFNI" class="headerlink" title="AFNI"></a><a href="https://afni.nimh.nih.gov/" target="_blank" rel="noopener">AFNI</a></h3><p> AFNI (Analysis of Functional NeuroImages) is a set of C programs for processing, analyzing, and displaying functional MRI (FMRI) data - a technique for mapping human brain activity. It runs on Unix+X11+Motif systems, including SGI, Solaris, Linux, and Mac OS X. It is available free (in C source code format, and some precompiled binaries) for research purposes.</p>
<h3 id="FSL"><a href="#FSL" class="headerlink" title="FSL"></a><a href="https://fsl.fmrib.ox.ac.uk/fsl/fslwiki" target="_blank" rel="noopener">FSL</a></h3><p>FSL is a comprehensive library of analysis tools for FMRI, MRI and DTI brain imaging data. It runs on Apple and PCs (both Linux, and Windows via a Virtual Machine), and is very easy to install. Most of the tools can be run both from the command line and as GUIs (“point-and-click” graphical user interfaces)</p>
<h3 id="NeuroDebian"><a href="#NeuroDebian" class="headerlink" title="NeuroDebian"></a><a href="http://neuro.debian.net/index.html" target="_blank" rel="noopener">NeuroDebian</a></h3><p>一个集成了大部分神经科学领域Linux系统下的工具的虚拟机镜像。里面包含的软件的列表可以参考：<a href="http://neuro.debian.net/pkgs.html" target="_blank" rel="noopener">http://neuro.debian.net/pkgs.html</a></p>
<h3 id="DPABI"><a href="#DPABI" class="headerlink" title="DPABI"></a><a href="http://rfmri.org/dpabi" target="_blank" rel="noopener">DPABI</a></h3><p>a toolbox for Data Processing &amp; Analysis for Brain Imaging. 静息态脑网络的相关数据和工具：<a href="http://rfmri.org/。" target="_blank" rel="noopener">http://rfmri.org/。</a></p>
<h3 id="NiBabel"><a href="#NiBabel" class="headerlink" title="NiBabel"></a><a href="http://nipy.org/nibabel/" target="_blank" rel="noopener">NiBabel</a></h3><p>提供读写神经影像数据格式的接口，基于python.</p>
<p>###</p>
<h2 id="ROI和Mask制作和查看"><a href="#ROI和Mask制作和查看" class="headerlink" title="ROI和Mask制作和查看"></a>ROI和Mask制作和查看</h2><h3 id="freeroi"><a href="#freeroi" class="headerlink" title="freeroi"></a><a href="http://freeroi.brainactivityatlas.org/" target="_blank" rel="noopener">freeroi</a></h3><p>FreeROI is a versatile image processing software developed for neuroimaging data. Its goal is to provide a user-friendly interface for neuroimaging researchers to visualize and analyze their data, especially in defining region of interest (ROI) for ROI analysis.</p>
<h3 id="xjview"><a href="#xjview" class="headerlink" title="xjview"></a><a href="http://www.alivelearn.net/xjview/" target="_blank" rel="noopener">xjview</a></h3><p>一个基于Matlab和SPM的用于查看激活的工具，可以Load不同的大脑地图从而实现显示激活的脑区的名称。还可以根据激活保存成Mask.</p>
<h3 id="WFU-PickAtlas"><a href="#WFU-PickAtlas" class="headerlink" title="WFU_PickAtlas"></a><a href="https://www.nitrc.org/projects/wfu_pickatlas/" target="_blank" rel="noopener">WFU_PickAtlas</a></h3><p>基于Matlab和SPM的ROI制作工具。支持导入不同的大脑地图制作各个脑区的Mask。也支持以某个MNI坐标为中心，制作球形，方形的mask.<br><img src="2017-05-02_111209.png" alt></p>
<h2 id="功能连接"><a href="#功能连接" class="headerlink" title="功能连接"></a>功能连接</h2><h3 id="CONN"><a href="#CONN" class="headerlink" title="CONN"></a><a href="https://www.nitrc.org/projects/conn/" target="_blank" rel="noopener">CONN</a></h3><p>一个用来做静息态和任务态功能核磁成像数据的功能连接(functional connectivity)的工具包，包括去噪，first_level,second_level分析，支持region-to-region, seed-to-region, voxel-to-voxel等水平的功能连接分析，结果的展示也很漂亮。</p>
<h3 id="REST"><a href="#REST" class="headerlink" title="REST"></a><a href="https://www.nitrc.org/projects/rest/" target="_blank" rel="noopener">REST</a></h3><p>主要功能是用来做静息态数据的功能连接，也提供了图像计算的一些方法，可以用来计算图像乘以激活之后的Mask。还提供了可视化图像的界面，可以用来查看图像。</p>
<h3 id="C-PAC"><a href="#C-PAC" class="headerlink" title="C-PAC"></a><a href="http://fcp-indi.github.io/docs/user/index.html" target="_blank" rel="noopener">C-PAC</a></h3><p>The Configurable Pipeline for the Analysis of Connectomes (C-PAC) is a configurable, open-source, Nipype-based, automated processing pipeline for resting state functional MRI (R-fMRI) data, for use by both novice and expert users</p>
<h3 id="wiki上处理功能连接的工具包的列表"><a href="#wiki上处理功能连接的工具包的列表" class="headerlink" title="wiki上处理功能连接的工具包的列表"></a>wiki上处理功能连接的工具包的列表</h3><p>&lt;<a href="https://en.wikipedia.org/wiki/List_of_functional_connectivity_software" target="_blank" rel="noopener">https://en.wikipedia.org/wiki/List_of_functional_connectivity_software</a></p>
<blockquote>
</blockquote>
<h2 id="MVPA"><a href="#MVPA" class="headerlink" title="MVPA"></a>MVPA</h2><h3 id="MVPA-1"><a href="#MVPA-1" class="headerlink" title="MVPA"></a><a href="https://github.com/PrincetonUniversity/princeton-mvpa-toolbox" target="_blank" rel="noopener">MVPA</a></h3><p>The MVPA Toolbox is a set of Matlab tools to facilitate multi-voxel pattern analysis of fMRI neuroimaging data.<br>The aim is to create a set of open source functions in a widely-used language to facilitate exploration of multi-voxel pattern analysis techniques and to reduce the ‘startup costs’ for knowledgeable users eager to apply pattern classification algorithms to their imaging data. By developing the toolbox in the Matlab environment, users are able to take advantage of the vast array of existing functions. The data structures used and generated by the toolbox are designed to facilitate exploration and further script development.</p>
<h3 id="pyMVPA"><a href="#pyMVPA" class="headerlink" title="pyMVPA"></a><a href="http://www.pymvpa.org/" target="_blank" rel="noopener">pyMVPA</a></h3><p>PyMVPA is a Python package intended to ease statistical learning analyses of large datasets. It offers an extensible framework with a high-level interface to a broad range of algorithms for classification, regression, feature selection, data import and export. It is designed to integrate well with related software packages, such as scikit-learn, shogun, MDP, etc. While it is not limited to the neuroimaging domain, it is eminently suited for such datasets. PyMVPA is free software and requires nothing but free-software to run.</p>
<p>pyMVPA windows 安装包的地址：<a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/" target="_blank" rel="noopener">http://www.lfd.uci.edu/~gohlke/pythonlibs/</a></p>
<h3 id="CoSMoMVPA"><a href="#CoSMoMVPA" class="headerlink" title="CoSMoMVPA"></a><a href="http://cosmomvpa.org/index.html" target="_blank" rel="noopener">CoSMoMVPA</a></h3><p>A multi-modal, multi-variate pattern analysis (MVPA) toolbox in Matlab / GNU Octave for cognitive neuroscientists.</p>
<h2 id="SignalChange"><a href="#SignalChange" class="headerlink" title="SignalChange"></a>SignalChange</h2><h3 id="marsbar"><a href="#marsbar" class="headerlink" title="marsbar"></a><a href="http://marsbar.sourceforge.net/index.html" target="_blank" rel="noopener">marsbar</a></h3><p><img src="2017-05-02_125514.png" alt></p>
<p>marsbar是基于Matlab的一个计算SignalChange的工具。里面定义了一种.mat的ROI格式，可以和.nii的ROI格式之间进行转换。里面提供了将一个多标签Mask分割成多个单独的mask的方法，当然，反过来也可以实现。</p>
<h2 id="group-ICA-分析"><a href="#group-ICA-分析" class="headerlink" title="group ICA 分析"></a>group ICA 分析</h2><h3 id="gift-http-mialab-mrn-org-software-gift"><a href="#gift-http-mialab-mrn-org-software-gift" class="headerlink" title="[gift](http://mialab.mrn.org/software/gift/"></a>[gift](<a href="http://mialab.mrn.org/software/gift/" target="_blank" rel="noopener">http://mialab.mrn.org/software/gift/</a></h3><p>)</p>
<p>一个使用很广泛的用来做组水平的ICA的工具。</p>
<h2 id="DCM"><a href="#DCM" class="headerlink" title="DCM"></a>DCM</h2><h3 id="TAPAS"><a href="#TAPAS" class="headerlink" title="TAPAS"></a><a href="https://www.tnu.ethz.ch/de/software/tapas.html" target="_blank" rel="noopener">TAPAS</a></h3><p>大量平行DCM的计算。</p>
<h2 id="绘图"><a href="#绘图" class="headerlink" title="绘图"></a>绘图</h2><h3 id="Origin"><a href="#Origin" class="headerlink" title="Origin"></a><a href="http://www.originlab.com" target="_blank" rel="noopener">Origin</a></h3><p>Origin是由OriginLab公司开发的一个科学绘图、数据分析软件，支持在Microsoft Windows下运行。Origin支持各种各样的2D/3D图形。Origin中的数据分析功能包括统计，信号处理，曲线拟合以及峰值分析。Origin中的曲线拟合是采用基于Levernberg-Marquardt算法（LMA）的非线性最小二乘法拟合。Origin强大的数据导入功能，支持多种格式的数据，包括ASCII , Excel, NI TDM, DIADem, NetCDF, SPC，等等。图形输出格式多样，例如JPEG，GIF，EPS，TIFF等。内置的查询工具可通过ADO访问数据库数据。<br><img src="2017-05-02_130248.png" alt></p>
<h3 id="EXCEL"><a href="#EXCEL" class="headerlink" title="EXCEL"></a>EXCEL</h3><p>各种条形图，柱状图，扇形图都可以用EXCEL来画。</p>
<h3 id="Matlab"><a href="#Matlab" class="headerlink" title="Matlab"></a>Matlab</h3><p>Matlab可以绘制各种2D，3D图形。很多基于Matlab的工具包画出的图形都是基于Matlab的画图功能。但是想用Matlab画出好看的图需要直接编写代码。</p>
<h3 id="Matplotlib"><a href="#Matplotlib" class="headerlink" title="Matplotlib"></a><a href="https://matplotlib.org/index.html" target="_blank" rel="noopener">Matplotlib</a></h3><p>Matplotlib is a Python 2D plotting library which produces publication quality figures in a variety of hardcopy formats and interactive environments across platforms. Matplotlib can be used in Python scripts, the Python and IPython shell, the jupyter notebook, web application servers, and four graphical user interface toolkits.</p>
<p><img src="2017-05-02_130835.png" alt></p>
<p>以上几个都是通用的绘图工具，适用于绘制各种图形。在认知神经科学的绘图中，经常需要以大脑为背景绘制图像。下面介绍几个实现了在大脑皮层或者大脑的展开层绘制图像的工具。</p>
<h3 id="BRAT"><a href="#BRAT" class="headerlink" title="BRAT"></a><a href="https://www.nitrc.org/projects/brat/" target="_blank" rel="noopener">BRAT</a></h3><p>Brainnetome fMRI toolkit (brat) refers to the construction and assessment of brain network used to evaluated brain network architecture about fMRI imaging data. These ideas have been instantiated in software that is called Brainnetome fRMI toolkit(brat).<br>The brat package has been designed for the analysis of brain network based on spm (<a href="http://www.fil.ion.ucl.ac.uk/spm/)" target="_blank" rel="noopener">http://www.fil.ion.ucl.ac.uk/spm/)</a>. The images can from different cohorts, or time-series from the same subject. The current release is designed for the analysis of fMRI, EEG.<br>It includes the proprecessing steps, functional connectivity analysis, network analysis and network view etc.</p>
<p>使用它可以很方便的绘制出类似下面这样的图：</p>
<p><img src="1.png" alt></p>
<p><img src="2.png" alt></p>
<h3 id="BrainNet-Viewer"><a href="#BrainNet-Viewer" class="headerlink" title="BrainNet Viewer"></a><a href="https://www.nitrc.org/projects/bnv/" target="_blank" rel="noopener">BrainNet Viewer</a></h3><p>BrainNet Viewer is a brain network visualization tool, which can help researchers to visualize structural and functional connectivity patterns from different levels in a quick, easy, and flexible way.<br>一个类似上面的那样可以绘制脑区位置和大脑功能连接的工具，比上面的工具好用，选项多一些，配置更方便。</p>
<h3 id="pycortex"><a href="#pycortex" class="headerlink" title="pycortex"></a><a href="https://github.com/gallantlab/pycortex" target="_blank" rel="noopener">pycortex</a></h3><p>一个基于python的绘制大脑展开皮层的工具。绘制的图形类似下面这样：</p>
<p><img src="QQ截图20170502132207.png" alt></p>
<h3 id="FreeSurfer"><a href="#FreeSurfer" class="headerlink" title="FreeSurfer"></a><a href="https://surfer.nmr.mgh.harvard.edu/fswiki/FreeSurferWiki" target="_blank" rel="noopener">FreeSurfer</a></h3><p>一个绘制皮层图像的工具，包含一些分析的方法。是由麻省总医院（Massachusetts General Hospital）的Bruce Fischl和同事开发的处理MRI解剖图像的软件包。虽然它实际上不是fMRI分析工具，但是因为它可以很容易地自动生成皮层表面模型和解剖分割图，因此近几年也越来越流行。这些模型可以用来进行基于皮层表面的被试间配准，这通常比常规的被试间的三维大脑配准更精确(见第4章)。它也可以导入FSL或者SPM处理过的统计结果，将它们投射在重建的皮层表面，这样可以进行基于皮层表面的组分析.产生的图像类似下面这样：</p>
<p><img src="5.png" alt></p>
<p><img src="lh_aparc.jpeg" alt></p>
<p><img src="encode.png" alt></p>
<p><img src="8.png" alt></p>
<h3 id="caret"><a href="#caret" class="headerlink" title="caret"></a><a href="http://brainvis.wustl.edu/wiki/index.php/Caret:Download" target="_blank" rel="noopener">caret</a></h3><p>类似freesurfer，可以绘制类似下面的图形，可以看到，这个更好看一些。</p>
<p><img src="caret.png" alt></p>
<h3 id="circos"><a href="#circos" class="headerlink" title="circos"></a><a href="http://circos.ca/" target="_blank" rel="noopener">circos</a></h3><p>一个常用来可视化基因组的工具包，可以用来画各种环状图形。</p>
<p><img src="QQ截图20170502133729.png" alt></p>
<h3 id="BrainBrowser"><a href="#BrainBrowser" class="headerlink" title="BrainBrowser"></a><a href="https://brainbrowser.cbrain.mcgill.ca" target="_blank" rel="noopener">BrainBrowser</a></h3><p>一个大脑的浏览器，各种视角看大脑。</p>
<h3 id="cbrain"><a href="#cbrain" class="headerlink" title="cbrain"></a><a href="http://mcin-cnim.ca/neuroimagingtechnologies/cbrain/" target="_blank" rel="noopener">cbrain</a></h3><p>一个基于浏览器的脑影像分析工具集合。</p>
<h3 id="pysurfer"><a href="#pysurfer" class="headerlink" title="pysurfer"></a><a href="https://pysurfer.github.io/" target="_blank" rel="noopener">pysurfer</a></h3><p>PySurfer is a Python library for visualizing cortical surface representations of neuroimaging data. The package is primarily intended for use with Freesurfer, but it can plot data that are drawn from a variety of sources. PySurfer extends Mayavi’s powerful rendering engine with a high-level interface for working with MRI and MEG data.</p>
<p><img src="QQ截图20170514155026.png" alt></p>
<h3 id="纤维束绘制工具"><a href="#纤维束绘制工具" class="headerlink" title="纤维束绘制工具"></a>纤维束绘制工具</h3><p><a href="http://www.med.unc.edu/psych/research/niral/download" target="_blank" rel="noopener">http://www.med.unc.edu/psych/research/niral/download</a></p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div></div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/hexoblog/images/weixin.png" alt="FEI FEI 微信支付">
        <p>微信支付</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/hexoblog//images/alipay.png" alt="FEI FEI 支付宝">
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者：</strong>
    FEI FEI
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://FF1204.github.io/hexoblog/技术/认知神经科学/fMRI中常用的工具包/" title="fMRI中常用的工具包">http://FF1204.github.io/hexoblog/技术/认知神经科学/fMRI中常用的工具包/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>
    本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！
  </li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/hexoblog/tags/fMRI/" rel="tag"># fMRI</a>
          
            <a href="/hexoblog/tags/toolboxhexo/" rel="tag"># toolboxhexo</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/hexoblog/技术/数据结构和算法/算法专题_一维数组/" rel="next" title="算法专题_一维数组">
                <i class="fa fa-chevron-left"></i> 算法专题_一维数组
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/hexoblog/技术/工具/编程IDE/JetBrainsCLion/JetBrainsCLion的使用01-入门/" rel="prev" title="JetBrainsCLion的使用01-入门">
                JetBrainsCLion的使用01-入门 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">FEI FEI</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/hexoblog/archives/">
              
                  <span class="site-state-item-count">162</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">29</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">101</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/hexoblog/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/FF1204" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#实验设计"><span class="nav-number">1.</span> <span class="nav-text">实验设计</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#psychopy"><span class="nav-number">1.1.</span> <span class="nav-text">psychopy</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据预处理和统计分析"><span class="nav-number">2.</span> <span class="nav-text">数据预处理和统计分析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SPM"><span class="nav-number">2.1.</span> <span class="nav-text">SPM</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AFNI"><span class="nav-number">2.2.</span> <span class="nav-text">AFNI</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#FSL"><span class="nav-number">2.3.</span> <span class="nav-text">FSL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NeuroDebian"><span class="nav-number">2.4.</span> <span class="nav-text">NeuroDebian</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DPABI"><span class="nav-number">2.5.</span> <span class="nav-text">DPABI</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NiBabel"><span class="nav-number">2.6.</span> <span class="nav-text">NiBabel</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ROI和Mask制作和查看"><span class="nav-number">3.</span> <span class="nav-text">ROI和Mask制作和查看</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#freeroi"><span class="nav-number">3.1.</span> <span class="nav-text">freeroi</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#xjview"><span class="nav-number">3.2.</span> <span class="nav-text">xjview</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#WFU-PickAtlas"><span class="nav-number">3.3.</span> <span class="nav-text">WFU_PickAtlas</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#功能连接"><span class="nav-number">4.</span> <span class="nav-text">功能连接</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#CONN"><span class="nav-number">4.1.</span> <span class="nav-text">CONN</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#REST"><span class="nav-number">4.2.</span> <span class="nav-text">REST</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#C-PAC"><span class="nav-number">4.3.</span> <span class="nav-text">C-PAC</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#wiki上处理功能连接的工具包的列表"><span class="nav-number">4.4.</span> <span class="nav-text">wiki上处理功能连接的工具包的列表</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MVPA"><span class="nav-number">5.</span> <span class="nav-text">MVPA</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#MVPA-1"><span class="nav-number">5.1.</span> <span class="nav-text">MVPA</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pyMVPA"><span class="nav-number">5.2.</span> <span class="nav-text">pyMVPA</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CoSMoMVPA"><span class="nav-number">5.3.</span> <span class="nav-text">CoSMoMVPA</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SignalChange"><span class="nav-number">6.</span> <span class="nav-text">SignalChange</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#marsbar"><span class="nav-number">6.1.</span> <span class="nav-text">marsbar</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#group-ICA-分析"><span class="nav-number">7.</span> <span class="nav-text">group ICA 分析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#gift-http-mialab-mrn-org-software-gift"><span class="nav-number">7.1.</span> <span class="nav-text">[gift](http://mialab.mrn.org/software/gift/</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DCM"><span class="nav-number">8.</span> <span class="nav-text">DCM</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#TAPAS"><span class="nav-number">8.1.</span> <span class="nav-text">TAPAS</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#绘图"><span class="nav-number">9.</span> <span class="nav-text">绘图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Origin"><span class="nav-number">9.1.</span> <span class="nav-text">Origin</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#EXCEL"><span class="nav-number">9.2.</span> <span class="nav-text">EXCEL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Matlab"><span class="nav-number">9.3.</span> <span class="nav-text">Matlab</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Matplotlib"><span class="nav-number">9.4.</span> <span class="nav-text">Matplotlib</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BRAT"><span class="nav-number">9.5.</span> <span class="nav-text">BRAT</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BrainNet-Viewer"><span class="nav-number">9.6.</span> <span class="nav-text">BrainNet Viewer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pycortex"><span class="nav-number">9.7.</span> <span class="nav-text">pycortex</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#FreeSurfer"><span class="nav-number">9.8.</span> <span class="nav-text">FreeSurfer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#caret"><span class="nav-number">9.9.</span> <span class="nav-text">caret</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#circos"><span class="nav-number">9.10.</span> <span class="nav-text">circos</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BrainBrowser"><span class="nav-number">9.11.</span> <span class="nav-text">BrainBrowser</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#cbrain"><span class="nav-number">9.12.</span> <span class="nav-text">cbrain</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pysurfer"><span class="nav-number">9.13.</span> <span class="nav-text">pysurfer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#纤维束绘制工具"><span class="nav-number">9.14.</span> <span class="nav-text">纤维束绘制工具</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2011 &mdash; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">FEI FEI</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">231.7k</span>
  
</div>








        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/hexoblog/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/hexoblog/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/hexoblog/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/hexoblog/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/hexoblog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/hexoblog/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/hexoblog/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/hexoblog/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/hexoblog/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/hexoblog/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/hexoblog/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/hexoblog/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/hexoblog/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/hexoblog/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/hexoblog/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
